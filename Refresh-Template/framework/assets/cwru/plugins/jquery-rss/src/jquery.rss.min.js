!function(t){"use strict";var e=function(e,n,i,r){this.target=e,this.url=n,this.html=[],this.effectQueue=[],this.options=t.extend({ssl:!0,host:"www.feedrapp.info",limit:null,key:null,layoutTemplate:"<ul>{entries}</ul>",entryTemplate:'<li><a href="{url}" target="_blank" class="feed-container-title">{title}</a><div class="feed-container-date">{date}</div></li>',tokens:{img:function(t,e){return t.thumbnail},excerptBody350:function(t,e){return e.body.slice(0,350)+"..."},excerptBody300:function(t,e){return e.body.slice(0,300)+"..."},excerptBody250:function(t,e){return e.body.slice(0,250)+"..."},excerptBody200:function(t,e){return e.body.slice(0,200)+"..."},excerptBody150:function(t,e){return e.body.slice(0,150)+"..."},excerptBody100:function(t,e){return e.body.slice(0,100)+"..."}},outputMode:"json",dateFormat:"MM/DD/YYYY",dateLocale:"en",effect:"show",offsetStart:null,offsetEnd:null,error:function(){console.log("jQuery RSS: url doesn't link to RSS-Feed")},onData:function(){},success:function(){}},i||{}),this.options.ssl&&"www.feedrapp.info"===this.options.host&&(this.options.host="feedrapp.herokuapp.com"),this.callback=r||this.options.success};e.htmlTags=["doctype","html","head","title","base","link","meta","style","script","noscript","body","article","nav","aside","section","header","footer","h1-h6","hgroup","address","p","hr","pre","blockquote","ol","ul","li","dl","dt","dd","figure","figcaption","div","table","caption","thead","tbody","tfoot","tr","th","td","col","colgroup","form","fieldset","legend","label","input","button","select","datalist","optgroup","option","textarea","keygen","output","progress","meter","details","summary","command","menu","del","ins","img","iframe","embed","object","param","video","audio","source","canvas","track","map","area","a","em","strong","i","b","u","s","small","abbr","q","cite","dfn","sub","sup","time","code","kbd","samp","var","mark","bdi","bdo","ruby","rt","rp","span","br","wbr"],e.prototype.load=function(e){var n="http"+(this.options.ssl?"s":""),i=n+"://"+this.options.host,r=i+"?callback=?&q="+encodeURIComponent(this.url);this.options.offsetStart&&this.options.offsetEnd&&(this.options.limit=this.options.offsetEnd),null!==this.options.limit&&(r+="&num="+this.options.limit),null!==this.options.key&&(r+="&key="+this.options.key),t.getJSON(r,e)},e.prototype.render=function(){function e(i){window.setTimeout(function(){t(i).length?n(i):e(i)},50)}function n(e){t(e).find("li.search-item").each(function(){""==t(this).find("a>img").attr("src")&&(t(this).find("a>img").css("display","none"),t(this).find("div").css("padding-left","0px"))})}function i(e){window.setTimeout(function(){t(e).length?r(e):i(e)},50)}function r(e){t(e).find("div.thumbnail").each(function(){""==t(this).find("a>img").attr("src")&&(t(this).find("a>img").css("display","none"),t(this).find(">div h2").css("margin-top","0px"))})}var o=this;this.load(function(e){try{o.feed=e.responseData.feed,o.entries=e.responseData.feed.entries}catch(n){return o.entries=[],o.feed=null,o.options.error.call(o)}var i=o.generateHTMLForEntries();if(o.target.append(i.layout),0!==i.entries.length){t.isFunction(o.options.onData)&&o.options.onData.call(o);var r=t(i.layout).is("entries")?i.layout:t("entries",i.layout);o.appendEntriesAndApplyEffects(r,i.entries)}o.effectQueue.length>0?o.executeEffectQueue(o.callback):t.isFunction(o.callback)&&o.callback.call(o)}),e("#"+o.target.attr("id")+">ul"),i("#"+o.target.attr("id")+">div.row")},e.prototype.appendEntriesAndApplyEffects=function(e,n){var i=this;t.each(n,function(t,n){var r=i.wrapContent(n);"show"===i.options.effect?e.before(r):(r.css({display:"none"}),e.before(r),i.applyEffect(r,i.options.effect))}),e.remove()},e.prototype.generateHTMLForEntries=function(){var e=this,n={entries:[],layout:null};return t(this.entries).each(function(){var t,i=this,r=e.options.offsetStart,o=e.options.offsetEnd;r&&o?index>=r&&index<=o&&e.isRelevant(i,n.entries)&&(t=e.evaluateStringForEntry(e.options.entryTemplate,i),n.entries.push(t)):e.isRelevant(i,n.entries)&&(t=e.evaluateStringForEntry(e.options.entryTemplate,i),n.entries.push(t))}),this.options.entryTemplate?n.layout=this.wrapContent(this.options.layoutTemplate.replace("{entries}","<entries></entries>")):n.layout=this.wrapContent("<div><entries></entries></div>"),n},e.prototype.wrapContent=function(e){return t(0!==t.trim(e).indexOf("<")?"<div>"+e+"</div>":e)},e.prototype.applyEffect=function(t,e,n){var i=this;switch(e){case"slide":t.slideDown("slow",n);break;case"slideFast":t.slideDown(n);break;case"slideSynced":i.effectQueue.push({element:t,effect:"slide"});break;case"slideFastSynced":i.effectQueue.push({element:t,effect:"slideFast"})}},e.prototype.executeEffectQueue=function(t){var e=this;this.effectQueue.reverse();var n=function(){var i=e.effectQueue.pop();i?e.applyEffect(i.element,i.effect,n):t&&t()};n()},e.prototype.evaluateStringForEntry=function(e,n){var i=e,r=this;return t(e.match(/(\{.*?\})/g)).each(function(){var t=this.toString();i=i.replace(t,r.getValueForToken(t,n))}),i},e.prototype.isRelevant=function(t,e){var n=this.getTokenMap(t);return!this.options.filter||(!this.options.filterLimit||this.options.filterLimit!==e.length)&&this.options.filter(t,n)},e.prototype.getFormattedDate=function(t){if(this.options.dateFormatFunction)return this.options.dateFormatFunction(t);if("undefined"!=typeof moment){var e=moment(new Date(t));return e=e.locale?e.locale(this.options.dateLocale):e.lang(this.options.dateLocale),e.format(this.options.dateFormat)}return t},e.prototype.getTokenMap=function(n){if(!this.feedTokens){var i=JSON.parse(JSON.stringify(this.feed));delete i.entries,this.feedTokens=i}return t.extend({feed:this.feedTokens,url:n.link,author:n.author,date:this.getFormattedDate(n.publishedDate),title:n.title,body:n.content,shortBody:n.contentSnippet,excerptContent100:n.content.replace(/(<([^>]+)>)/gi,"").substring(0,100)+"...",excerptContent150:n.content.replace(/(<([^>]+)>)/gi,"").substring(0,150)+"...",excerptContent200:n.content.replace(/(<([^>]+)>)/gi,"").substring(0,200)+"...",excerptContent250:n.content.replace(/(<([^>]+)>)/gi,"").substring(0,250)+"...",excerptContent300:n.content.replace(/(<([^>]+)>)/gi,"").substring(0,300)+"...",excerptContent350:n.content.replace(/(<([^>]+)>)/gi,"").substring(0,350)+"...",excerptContentPM100:n.content.replace(/<(?!\s*\/?\s*p\b)[^>]*>/gi,"").substring(18,100)+"...",excerptContentPM150:n.content.replace(/<(?!\s*\/?\s*p\b)[^>]*>/gi,"").substring(18,150)+"...",excerptContentPM200:n.content.replace(/<(?!\s*\/?\s*p\b)[^>]*>/gi,"").substring(18,200)+"...",excerptContentPM250:n.content.replace(/<(?!\s*\/?\s*p\b)[^>]*>/gi,"").substring(18,250)+"...",excerptContentPM300:n.content.replace(/<(?!\s*\/?\s*p\b)[^>]*>/gi,"").substring(18,300)+"...",excerptContentPM350:n.content.replace(/<(?!\s*\/?\s*p\b)[^>]*>/gi,"").substring(18,350)+"...",bodyPlain:function(t){for(var n=t.content.replace(/<script[\\r\\\s\S]*<\/script>/gim,"").replace(/<\/?[^>]+>/gi,""),i=0;i<e.htmlTags.length;i++)n=n.replace(new RegExp("<"+e.htmlTags[i],"gi"),"");return n}(n),bodyPlain350:function(t){for(var n=t.content.replace(/<script[\\r\\\s\S]*<\/script>/gim,"").replace(/<\/?[^>]+>/gi,"").substring(0,350)+"...",i=0;i<e.htmlTags.length;i++)n=n.replace(new RegExp("<"+e.htmlTags[i],"gi"),"");return n}(n),bodyPlain300:function(t){for(var n=t.content.replace(/<script[\\r\\\s\S]*<\/script>/gim,"").replace(/<\/?[^>]+>/gi,"").substring(0,300)+"...",i=0;i<e.htmlTags.length;i++)n=n.replace(new RegExp("<"+e.htmlTags[i],"gi"),"");return n}(n),bodyPlain250:function(t){for(var n=t.content.replace(/<script[\\r\\\s\S]*<\/script>/gim,"").replace(/<\/?[^>]+>/gi,"").substring(0,250)+"...",i=0;i<e.htmlTags.length;i++)n=n.replace(new RegExp("<"+e.htmlTags[i],"gi"),"");return n}(n),bodyPlain200:function(t){for(var n=t.content.replace(/<script[\\r\\\s\S]*<\/script>/gim,"").replace(/<\/?[^>]+>/gi,"").substring(0,200)+"...",i=0;i<e.htmlTags.length;i++)n=n.replace(new RegExp("<"+e.htmlTags[i],"gi"),"");return n}(n),bodyPlain150:function(t){for(var n=t.content.replace(/<script[\\r\\\s\S]*<\/script>/gim,"").replace(/<\/?[^>]+>/gi,"").substring(0,150)+"...",i=0;i<e.htmlTags.length;i++)n=n.replace(new RegExp("<"+e.htmlTags[i],"gi"),"");return n}(n),bodyPlain100:function(t){for(var n=t.content.replace(/<script[\\r\\\s\S]*<\/script>/gim,"").replace(/<\/?[^>]+>/gi,"").substring(0,100)+"...",i=0;i<e.htmlTags.length;i++)n=n.replace(new RegExp("<"+e.htmlTags[i],"gi"),"");return n}(n),shortBodyPlain:n.contentSnippet.replace(/<\/?[^>]+>/gi,""),index:t.inArray(n,this.entries),totalEntries:this.entries.length,teaserImage:function(t){try{return t.content.match(/(<img.*?>)/gi)[0]}catch(e){return""}}(n),teaserImageUrl:function(t){try{return t.content.match(/(<img.*?>)/gi)[0].match(/src="(.*?)"/)[1]}catch(e){return""}}(n)},this.options.tokens)},e.prototype.getValueForToken=function(t,e){var n=this.getTokenMap(e),i=t.replace(/[\{\}]/g,""),r=n[i];if("undefined"!=typeof r)return"function"==typeof r?r(e,n):r;throw new Error("Unknown token: "+t+", url:"+this.url)},t.fn.rss=function(t,n,i){return new e(this,t,n,i).render(),this}}(jQuery);